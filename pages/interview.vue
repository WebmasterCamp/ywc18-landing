<template>
  <ThemeProvider :name="currTheme">
    <InfoContainer class="interview-intro">
      <h2>ประกาศผู้มีสิทธิ์เข้าสัมภาษณ์</h2>
      <p>
        การสัมภาษณ์จะจัดขึ้นใน
        <span class="themeText">วันเสาร์ที่ 21 พฤศจิกายน 2563</span> ณ
        <a
          class="themeLink"
          href="https://goo.gl/maps/c9MCn4Q6mzU2WW1HA"
          title="คลิกเพื่อดูแผนที่บน Google Maps"
          target="_blank"
          rel="noopener noreferrer"
          ><b>SCB Academy อาคาร SCB Park Plaza (East Tower) ชั้น 18</b></a
        ><br />
        ซึ่งจะแบ่งออกเป็น 2 รอบ คือ
        <span class="themeText">รอบเช้า (ตั้งแต่เวลา 09:00 ถึง 12:00 น.)</span>
        และ
        <span class="themeText">รอบบ่าย (ตั้งแต่เวลา 13:00 ถึง 17:00 น.)</span>
      </p>
      <p>
        <span class="themeText">หมายเหตุ </span> : ผู้เข้าสัมภาษณ์ทุกคนจะต้องกรอกแบบฟอร์มประเมินความเสี่ยงโรคติดเชื้อไวรัสโคโรนา 2019 (COVID-19) ดังนั้น กรุณาเดินทางมายังสถานที่สัมภาษณ์ ก่อนถึงเวลานัดหมาย<span class="themeText">อย่างน้อย 20 นาที</span>
      </p>
      <h3>สิ่งที่ต้องเตรียมมาในวันสัมภาษณ์</h3>
      <ol>
        <li>
          <span class="themeText">บัตรประจำตัวประชาชนตัวจริงเท่านั้น</span>
          เพื่อใช้สำหรับการเข้าอาคาร หากน้อง ๆ ไม่มีบัตรประจำตัวประชาชน<span
            class="themeText"
            >ไม่สามารถเข้าอาคารได้</span
          >
        </li>
        <li>
          <span class="themeText">สำเนาบัตรประจำตัวประชาชน 1 ชุด</span>
          โดยถ่ายมา<span class="themeText">เฉพาะด้านหน้าบัตร</span>
          เพื่อใช้สำหรับการยืนยันตัวตนในการเข้าสัมภาณ์ โดยให้เขียนบนสำเนาว่า
          “ใช้สำหรับลงทะเบียนสัมภาษณ์ค่าย YWC18 เท่านั้น” เซ็นรับรองสำเนาถูกต้อง
          พร้อมกับระบุวันที่ใช้สำเนาบัตรประชาชน (21 พฤศจิกายน 2563)
          <a
            href="/images/interview/example_national_id.jpg"
            class="themeLink"
            target="_blank"
            rel="noopener noreferrer"
            ><b>ตัวอย่างไฟล์สำเนาบัตรประชาชน</b></a
          >
        </li>
        <li>
          <span class="themeText"
            >แต่งกายด้วยชุดนักเรียน ชุดนักศึกษา หรือ ชุดสุภาพ
          </span>
        </li>
        <li>
          <span class="themeText">การบ้านและสิ่งที่กรรมการกำหนดไว้</span>
          โปรดอ่านรายละเอียดการบ้านและสิ่งที่กรรมการกำหนดไว้ให้ครบถ้วน
          หากต้องการใช้คอมพิวเตอร์พกพาเพื่อประกอบการนำเสนอต่อคณะกรรมการ
          กรุณาเตรียมแบตเตอรี่และอินเทอร์เน็ตมาให้พร้อม
          เนื่องจากสถานที่สัมภาษณ์ไม่มีการจัดเตรียมไว้ให้
        </li>
        <li>
          <span class="themeText">Portfolio</span>
          สามารถเตรียมมาเพื่อประกอบการพิจารณาได้ (โดยสาขา
          <span class="themeText webDesign">Web Design</span> จะต้องนำมาทุกคน)
        </li>
        <li>กรุณาสวมใส่หน้ากากอนามัยตลอดการสัมภาษณ์ เพื่อเป็นการป้องกันการแพร่ระบาดของโรค COVID-19</li>
      </ol>
      <h3>การเดินทางมาสัมภาษณ์</h3>
      <ol>
        <li>
          <span class="themeText">รถประจำทาง</span> สาย 104, 503 (ปอ.), 59, 63,
          63 (ปอ.) ลงป้าย ป้ายรถประจำทาง ตึกช้าง 2
        </li>
        <li>
          <span class="themeText">รถไฟฟ้า BTS</span> อยู่ระหว่าง 2 สถานี คือ
          <span class="themeText">สถานีพหลโยธิน 24</span> และ
          <span class="themeText">สถานีรัชโยธิน</span>
          <ul>
            <li>- ลงสถานีรัชโยธิน ทางออกที่ 1 หรือ 2</li>
            <li>- ลงสถานีพหลโยธิน 24 ทางออกที่ 3</li>
          </ul>
          <span class="themeText">คำแนะนำ</span> : ควรเดินทางด้วยรถโดยสารสาธารณะ หากเดินทางด้วยรถส่วนบุคคล สามารถจอดรถได้ที่อาคาร SCB Park Plaza โดยมีค่าบริการชั่วโมงละ 100 บาท ซึ่งผู้เข้าสัมภาษณ์จะต้องชำระค่าที่จอดรถด้วยตนเอง
        </li>
      </ol>
      <h3>สำหรับท่านที่ไม่สะดวกเดินทางมาสัมภาษณ์</h3>
      <p>
        สามารถแจ้งได้ใน Inbox ของเพจ
        <a
          class="themeLink"
          href="https://m.me/ywcth"
          target="_blank"
          rel="noopener noreferrer"
          ><b>Facebook : Young Webmaster Camp</b></a
        >
        ภายในวันที่ 18 พฤศจิกายน 2563 เท่านั้น
      </p>
      <h3>มีข้อสงสัยเพิ่มเติม โปรดติดต่อ</h3>
      <table>
        <tbody>
          <tr>
            <td width="70"><span class="themeText">พี่ไตเติ้ล</span></td>
            <td>
              โทร. <a class="themeLink" href="tel:0859526272">085-952-6272</a>
            </td>
          </tr>
          <tr>
            <td><span class="themeText">พี่มิว</span></td>
            <td>
              โทร. <a class="themeLink" href="tel:0852545588">085-254-5588</a>
            </td>
          </tr>
          <tr>
            <td><span class="themeText">พี่ใบพลู</span></td>
            <td>
              โทร. <a class="themeLink" href="tel:0922483162">092-248-3162</a>
            </td>
          </tr>
        </tbody>
      </table>
    </InfoContainer>
    <a id="select-major" />
    <Majors :selected="major" route="/interview" :clickHandler="changeMajor" />

    <a id="interview-box"></a>
    <InfoContainer v-show="major" class="interview-box">
      <nuxt-child
        v-if="major"
        :majors="majors"
        :results="results"
        :isLoading="isLoading"
      />
    </InfoContainer>
    <div style="margin-top: 3em;">
      <SponsorBox />
      <Footer />
    </div>
  </ThemeProvider>
</template>
<script>
import ThemeProvider from '~/components/ThemeProvider.vue'
import InfoContainer from '~/components/InfoContainer.vue'
import Majors from '~/components/result/Majors.vue'
import SponsorBox from '~/components/SponsorBox.vue'
import Footer from '~/components/sections/ywc18/Footer.vue'
import { colorScheme } from '~/utils/color'
import { majors } from '~/utils/const'

export default {
  validate({ params }) {
    return !params.major || Object.keys(majors).includes(params.major)
  },
  layout: 'secondary',
  head() {
    return {
      title: `ประกาศผู้มีสิทธิ์เข้าสัมภาษณ์${
        this.$route.params.major
          ? `สาขา Web ${majors[this.$route.params.major][0]}`
          : ''
      } - 18th Young Webmaster Camp`,
      meta: [
        {
          hid: 'og:title',
          name: 'og:title',
          content: `ประกาศผู้มีสิทธิ์เข้าสัมภาษณ์${
            this.$route.params.major
              ? `สาขา Web ${majors[this.$route.params.major][0]}`
              : ''
          } - 18th Young Webmaster Camp`,
        },
        { hid: 'og:description', name: 'og:description', content: '' }, // TODO: Add description
        { hid: 'description', name: 'description', content: '' }, // TODO: Add description
        { name: 'robots', content: this.$route.params.major ? 'noindex' : '' },
      ],
    }
  },
  components: {
    ThemeProvider,
    Majors,
    InfoContainer,
    Footer,
    SponsorBox,
  },
  data() {
    return {
      majors,
      results: { content: [], design: [], marketing: [], programming: [] },
      isLoading: true,
    }
  },
  computed: {
    major() {
      return this.$route.params.major || ''
    },
    currTheme() {
      if (!this.major) {
        return ''
      }
      return majors[this.major][1]
    },
  },
  created() {
    if (process.client) {
      window.scrollTo(0, 0)
      // this.changeBackground(this.major)
    }
  },
  mounted() {
    this.loadData()
  },
  methods: {
    changeMajor(major) {
      if (major === this.major) {
        major = ''
      }
      // this.changeBackground(major)
      this.$router.replace(`/interview/${major ? `${major}/` : ''}`, () => {
        setTimeout(() => {
          this.$scrollTo(major ? `#interview-box` : `#select-major`)
        }, 150)
      })
    },
    changeBackground(major) {
      if (major) {
        document.getElementsByTagName('body')[0].setAttribute(
          'style',
          `background: ${colorScheme[majors[major][1]].normal};
      background: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), ${colorScheme[majors[major][1]].background};
      background-size: cover;
      background-attachment: fixed;`
        )
      } else {
        document.getElementsByTagName('body')[0].setAttribute(
          'style',
          `background: #401b19;
        background: linear-gradient(0deg, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), linear-gradient(69.01deg, #C73884 7.27%, #E13C6F 51.46%, #9B308E 95.22%);
        background-size: cover;
        background-attachment: fixed;`
        )
      }
    },
    loadData() {
      const vm = this
      vm.isLoading = true
      vm.$axios
        .get(`https://api-prod.ywc18.ywc.in.th/users/interview/pass`)
        .then(({ status, data }) => {
          vm.isLoading = false
          if (status === 200 && data.status !== 'error') {
            vm.results = data.payload
          }
        })
        .catch(() => {
          vm.isLoading = false
          vm.$message.error(
            'เกิดข้อผิดพลาดในการโหลดรายชื่อผู้มีสิทธิ์เข้าสัมภาษณ์'
          )
        })
    },
  },
  beforeRouteUpdate(to, from, next) {
    if (
      from.path.includes('/interview') &&
      Object.keys(from.query).length > 0
    ) {
      this.loadData()
    }
    next()
  },
  middleware(ctx) {
    return (
      new Date() < new Date('2020-11-10T11:00:00.000Z') && ctx.redirect('/')
    )
  },
}
</script>
<style lang="scss">
.secondary.interview,
.secondary.interview-major {
  .container {
    max-width: 1056px;
  }
  .ywc-logo {
    filter: drop-shadow(0px 4px 4px rgba(0, 0, 0, 0.25));
    text-align: left;
    margin: 0;
    /* margin-top: 40px; */
  }
  .section-heading {
    text-align: center;
    user-select: none;
  }
  input {
    font-family: CmPrasanmit, system-ui, -apple-system, sans-sreif;
    font-size: 24px;
  }
  .interview-intro,
  .interview-box {
    font-size: 18px;
    @media screen and (max-width: 768px) {
      font-size: 16px;
    }
    h3 {
      margin: 0;
      margin-top: 25px;
      margin-bottom: 25px;
    }
  }
  .interview-intro {
    font-family: CmPrasanmit, system-ui, -apple-system, sans-sreif;
    font-size: 24px;
    h2:first-of-type,
    h3 {
      margin-top: 0px;
      font-size: 22px;
      font-family: Anuphan, system-ui, -apple-system, sans-sreif;
    }
    ol {
      padding-left: 20px;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    p {
      margin-bottom: 2em;
    }
  }
  #interview-box {
    padding-bottom: 43px;
  }
  .interview-box {
    padding-top: 25px;
    padding-bottom: 25px;
    h3:first-of-type {
      margin-top: 0px;
    }
    ol,
    ul {
      padding-left: 20px;
      margin: 0;
    }
    ul.nolist {
      list-style-type: none;
      padding-left: 0;
    }
    h4 {
      margin-bottom: 0;
    }
    button {
      font-family: 'CmPrasanmit';
    }
    .subheading {
      font-family: 'CmPrasanmit';
    }
    img {
      max-width: 100%;
      vertical-align: middle;
    }
  }
}
</style>
